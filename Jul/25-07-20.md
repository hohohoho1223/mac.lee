# 오늘 내가 배운 것들(Today I Learned)

- 데이터 10,000개로 돌려놓고 잤음(finetuned_version 2)

---

1. LLM의 학습 방식과 토큰화
    - LLM(예: GPT, Mistral 등)은 문자열을 토큰 단위로 분해해서 학습한다
    - 이때 문자열 안에 이스케이프 문자(역슬래시)가 많으면

> 이스케이프 문자열: 
> JSON 안에 또 다른 JSON을 "문자열"로 한 줄에 넣으려면 내부 쌍따옴표(")나 특수문자(줄바꿈 등)를 “구분(escape)" 하기 위함

- 실제로 사람이 읽는 의미와는 무관한 불필요한 토큰이 늘어남
- 예시:

```plaintext
    - {"recommend": "..."} → {, ", , ", ... 등으로 쪼개짐
    - { "recommend": "..." } → {, ", recommend, ... 등으로 쪼개짐
```

- 불필요한 이스케이프 토큰이 많아지면
- 모델이 실제 의미와 무관한 패턴을 학습하게 됨

## 2. 실제 LLM 학습 데이터의 Best Practice

- OpenAI, Meta, Google 등 주요 LLM 논문/공개 데이터셋
- 대부분의 학습 데이터는 실제 사람이 읽는 문장이나 순수 JSON 오브젝트 형태로 구성되어 있음
- 예시:
  - [OpenAI GPT-3 논문 Appendix A.1](https://arxiv.org/abs/2005.14165)

    > “We use plain text, code, and structured data in their natural form, not as stringified/escaped JSON.”

    - [Stanford Alpaca, Llama2, Mistral 등 공개 데이터셋](https://github.com/tatsu-lab/stanford_alpaca)

    > output은 항상 사람이 읽는 문장, 혹은 순수 JSON 오브젝트

## 3. 실제 문제점: 이스케이프된 JSON 문자열로 학습할 때

- 모델이 불필요하게 역슬래시()를 따라하게 됨
- 예시:

```plaintext
    - 프롬프트: “JSON으로 답해줘”
    - 학습 데이터: {"recommend": "..."}
```

- 모델이 실제로도 \를 넣어서 출력하려고 함
  - 그래서 출력문에 역슬래쉬가 내포해 있던것.

## 4. 문자열(string)과 오브젝트(object)의 차이

1. 문자열 (string)
    - 따옴표(")로 감싸진 문자들의 나열
    - 예시:

```json
"output": "{\"recommend\": \"...\", \"challenges\": [{\"title\": \"...\"}]}"
```

- 여기서 "output"의 값은 그냥 문자열임
- 내부에 쌍따옴표가 있어서 이스케이프()가 필요

2. 오브젝트 (object)
    - JSON의 실제 구조체(딕셔너리/맵)
    - 예시:

```json
"output": {
"recommend": "...",
"challenges": [
    {"title": "...", "description": "..."}
]
}
```

- 여기서 "output"의 값은 “실제 JSON 오브젝트”
- 파이썬에선 딕셔너리(dict)로 바로 변환 가능 → 이스케이프 필요 없음

### 결론:

- 데이터셋 문자열 안에 이스케이프 문자(역슬래시)를 없애고 다시 학습시키자