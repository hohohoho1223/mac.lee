# 오늘 내가 배운 것들(Today I Learned)

- 오늘은 마지막 딥다이브를 진행하였다.

---

<aside>

## ERD(Entity-Relationship Diagram)이란?

- 개체 관계도로서, 프로덕트의 데이터 모델임
- 데이터베이스 설계는 유지보수 및 성능을 위해 효율적인 설계가 필수 불가결이다!

## ERD가 데이터베이스 설계의 효율성이 높은 이유

1. **요구사항 분석**
    - 사용자의 의도와 맞게 시스템이 필요로 하는 데이터 정의 및 모델링
2. **논리적 데이터 모델링 & 물리적 데이터 모델링**
    - 논리적 모델링 : 테이블 , 열 , 데이터 타입 등을 정의
    - 물리적 모델링 : 논리적 데이터 모델을 실제로 구현하는 과정
        - 데이터 엑세스 성능 향상 : 인덱스
        - 디스크 저장 공간 최적화 : 파티셔닝
        - 백업, 복구 및 유지보수의 효율성 확보 : 클러스터링
        
        데이터베이스의 성능과 확장성을 최적화 하기 위해 필요한 과정 (안하면 I/O 성능병목 현상이 발생함)
        
        - 1. 인덱스 (Index)
            - 검색 속도 향상
            - 정렬 및 그룹화 효율
            - 무결성 유지
                
                무결성 : DB에서 데이터의 정확성, 일관성, 신뢰성을 유지하는 것
                
        - 2. 파티셔닝(Partitioning)
            - 관리 용이
            - 아카이빙 효율 : 오래된 데이터를 손쉽게 분리하거나 이동 가능
                
                대용랑 로그 테이블, 이력 테이블에 자주 활용
                
        - 3. 클러스터링(Clustering)
            - 특정 컬럼 기준으로 **물리적으로 정**렬하여 저장하는 방식
            - 범위 조회 성능 향상
            - 디스크 I/O 감소 : 관련 데이터가 연속적으로 저장되므로 디스크 접근 최소화
            - 캐시 효율 증가 : 관련 데이터가 함께 메모리에 올라오기 때문
                
                데이터 수정이 자주 발생하면 클러스터링 컬럼의 정렬이 깨질수 있음
                
3. **데이터 베이스 정규화**
    - 데이터 중복을 최소화하고 데이터의 무결성을 보장하기 위한 과정
        - 첫번째 정규형(1NF) : 모든 속성이 원자값을 가져야 한다는 규칙(반복되는 그룹 제거)
            
            
            | **학번** | **이름** | **수강과목** |
            | --- | --- | --- |
            | 101 | 홍길동 | 수학, 과학 ❌ (비정규형) |
            
            -> 수강과목 분리
            
            | **학번** | **이름** | **수강과목** |
            | --- | --- | --- |
            | 101 | 홍길동 | 수학 ✅ |
            | 101 | 홍길동 | 과학 ✅ |
        - 두번째 정규형(2NF) : 부분 함수 종속성을 제거 (1NF 만족 + 기본키 일부에만 종속된 컬럼 제거)
            
            
            | **학생ID** | **과목** | **교수이름** |
            | --- | --- | --- |
            | 101 | 데이터베이스 | 김교수 |
            | 101 | 알고리즘 | 이교수 |
            | 102 | 알고리즘 | 이교수 |
            - 기본키는 (학생 ID, 과목) -> 복합키
            - 교수이름은 **과목에만 종**속되어 있음 : 과목 하나당 교수 한명으로 고정 되었다고 볼수 있으므로
            - 학생 ID는 교수이름과 무관하게 독립적인 속성으로 볼 수 있음
            
            <aside>
            📌
            
            따라서 교수이름이 **복합키(학생 ID, 과목)**의 일부인 과목에만 종속 되므로,  부분 함수 종속이라고 표현
            
            </aside>
            
            - Q. 그럼 왜 복합키는 학생ID&과목 인건가? 기준이 따로 있는지?
                - 기본키(PRIMARY KEY) : 테이블 내 각 행을 유일하게 식별 할 수 있는 컬럼 이다
                - 즉  **행 하나를 구별할 수 있는 최소한의** **정**보가 있어야 기본키가 됨
            - 학생ID + 과목 조합이 기본키 조건인 유일성을 만족하므로 복합키로 설정할 수 있다
                
                
                | **학생ID** | **과목** |
                | --- | --- |
                | 101 | 데이터베이스 ✅ |
                | 101 | 알고리즘 ✅ |
                | 102 | 알고리즘 ✅ |
        - 세번째 정규형(3NF) : 이행적 함수 종속성을 제거
            - 이행적 함수 종속이 뭐지?
                
                
                | **학생ID** | **학과코드** | **학과이름** |
                | --- | --- | --- |
                | 101 | CS | 컴퓨터공학과 |
                | 102 | EE | 전자공학과 |
                | 103 | CS | 컴퓨터공학과 |
                - 기본키 : 학생 ID
                - 학과코드는 학생ID에 종속(포함)
                - 학과이름은 학과코드에 종속(포함)
            - 이러면 학과이름이 학생ID에 종속 되었다고 볼 수 있다!
                
                결국 학생ID → 학과코드 -> 학과이름 : **이행적으로 종속 되었음** -> 3NF 위반
                
            - 왜 이행적으로 종속되면 위반인걸까?
                - **데이터의 중복과 이상(anomaly) 현상**이 발생하기 때문이다!
                - 갱신 이상 : 컴퓨터공학과 이름을 바꾸려고 하면 해당 되는 컬럼 내용을 전부다 바꿔야함
                - 삭제 이상 : CS 학과에 등록된 학생이 모두 삭제되면 컴퓨터공학 정보도 사라짐
            - 제 3정규형 적용
                1. 학생테이블
                
                | **학생ID** | **학과코드** |
                | --- | --- |
                | 101 | CS |
                | 102 | EE |
                | 103 | CS |
                1. 학과 테이블
                
                | **학과코드** | **학과이름** |
                | --- | --- |
                | CS | 컴퓨터공학과 |
                | EE | 전자공학과 |
                
                -> 이렇게 분리 하면 이행적 종속 제거 및 3정규형 만족함😉
                
4. **데이터 흐름과 관계 시각화**
    - 테이블 간의 관계(1:1, 1:N , N:M)를 명확하게 보여줌
    - 어떤 테이블이 어떤 데이터를 참조하는지 어떤 방향인지 시각적으로 확인가능
        
        -> 이는 쿼리 설계, 조인 최적화, 데이터 종속성 파악에 큰 도움
        
5. **팀 협업 및 유지보수 효율 향상**
    - 개발자, 기획자,DB 관리자 등 **여러 역할 간의 공통 언어 역할**을 해줌
        
        Q. 프로그래밍 언어나 DB 언어를 공통적으로 써서 그런가?
        
        A. 그게 아니라 **시각적이고 개념적인 '데이터 구조의 표현** **방식'** 이 모든 역할에게 공통적으로 이해되기 때문
        
        - 공통언어 : ERD자체가 여러 팀이 이해할 수 있는 '공통의 시각적 설계 도면' 역할을 한다는 뜻
        - 시간 경과후에도 ERD를 통해 데이터 구조를 빠르게 파악 가능
            
            -> 시스템 유지보수, 신규 기능 개발 시 빠른대응 가능😀
            
</aside>